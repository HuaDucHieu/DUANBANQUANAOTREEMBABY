/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package view;

import dao.DanhMucDAO;
import entity.DanhMucEntity;
import java.util.List;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Tran Tien
 */
public class QuanLyDanhMucJPanel extends javax.swing.JPanel {

    // Khai b√°o ƒë·ªëi t∆∞·ª£ng DAO ƒë·ªÉ thao t√°c v·ªõi c∆° s·ªü d·ªØ li·ªáu (CSDL)
    DanhMucDAO danhMucDAO = new DanhMucDAO();

    // H√†m kh·ªüi t·∫°o - ch·∫°y ƒë·∫ßu ti√™n khi t·∫°o JPanel
    public QuanLyDanhMucJPanel() {
        initComponents();   // H√†m NetBeans t·ª± sinh (t·∫°o n√∫t, b·∫£ng, textfield, label...)
        fillTable();        // G·ªçi h√†m ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ database v√† hi·ªÉn th·ªã l√™n b·∫£ng
    }

    // üßæ H√†m l·∫•y d·ªØ li·ªáu t·ª´ CSDL v√† hi·ªÉn th·ªã ra JTable
    public void fillTable() {
        // L·∫•y model (d·ªØ li·ªáu) c·ªßa b·∫£ng
        DefaultTableModel model = (DefaultTableModel) tblDanhMuc.getModel();
        model.setRowCount(0); // X√≥a d·ªØ li·ªáu c≈© trong b·∫£ng tr∆∞·ªõc khi th√™m d·ªØ li·ªáu m·ªõi

        // L·∫•y to√†n b·ªô danh s√°ch danh m·ª•c t·ª´ database th√¥ng qua DAO
        List<DanhMucEntity> list = danhMucDAO.getAll();

        // Duy·ªát t·ª´ng danh m·ª•c trong danh s√°ch v√† ƒë∆∞a v√†o b·∫£ng
        for (DanhMucEntity dm : list) {
            Object[] data = {
                dm.getIdDanhMuc(),
                dm.getTenDanhMuc(), // C·ªôt 1: T√™n danh m·ª•c
                dm.getMoTa() // C·ªôt 2: M√¥ t·∫£
            };
            model.addRow(data); // Th√™m 1 d√≤ng v√†o b·∫£ng
        }

        // C·∫≠p nh·∫≠t l·∫°i model cho b·∫£ng
        tblDanhMuc.setModel(model);
    }

    // üì¶ H√†m l·∫•y d·ªØ li·ªáu nh·∫≠p tr√™n form v√† t·∫°o ƒë·ªëi t∆∞·ª£ng DanhMucEntity
    public DanhMucEntity getDanhMuc() {
        try {
            String tenDM = txtTenDanhMuc.getText().trim(); // L·∫•y t√™n danh m·ª•c t·ª´ √¥ nh·∫≠p
            String moTa = txtMoTa.getText().trim();        // L·∫•y m√¥ t·∫£ t·ª´ √¥ nh·∫≠p

            // Ki·ªÉm tra xem ng∆∞·ªùi d√πng c√≥ b·ªè tr·ªëng kh√¥ng
            if (tenDM.isEmpty() || moTa.isEmpty()) {
                JOptionPane.showMessageDialog(this, "Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß t√™n danh m·ª•c v√† m√¥ t·∫£!");
                return null; // N·∫øu thi·∫øu d·ªØ li·ªáu th√¨ d·ª´ng l·∫°i
            }

            // N·∫øu h·ª£p l·ªá, tr·∫£ v·ªÅ 1 ƒë·ªëi t∆∞·ª£ng DanhMucEntity (ch·ª©a th√¥ng tin danh m·ª•c)
            return new DanhMucEntity(tenDM, moTa);

        } catch (Exception e) {
            // N·∫øu c√≥ l·ªói trong qu√° tr√¨nh l·∫•y d·ªØ li·ªáu th√¨ b√°o l·ªói ra h·ªôp tho·∫°i
            JOptionPane.showMessageDialog(this, "L·ªói khi l·∫•y d·ªØ li·ªáu danh m·ª•c: " + e.getMessage());
            return null;
        }
    }

    // ü™Ñ H√†m hi·ªÉn th·ªã d·ªØ li·ªáu t·ª´ Entity l√™n form (d√πng khi b·∫•m v√†o 1 d√≤ng tr√™n b·∫£ng)
    public void setDanhMuc(DanhMucEntity dm) {
        txtTenDanhMuc.setText(dm.getTenDanhMuc()); // G√°n t√™n danh m·ª•c l√™n √¥ nh·∫≠p
        txtMoTa.setText(dm.getMoTa());             // G√°n m√¥ t·∫£ l√™n √¥ nh·∫≠p
    }

    // üßπ H√†m x√≥a tr·∫Øng form (reset c√°c √¥ nh·∫≠p)
    public void clearForm() {
        txtTenDanhMuc.setText(""); // X√≥a n·ªôi dung √¥ t√™n danh m·ª•c
        txtMoTa.setText("");       // X√≥a n·ªôi dung √¥ m√¥ t·∫£
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        btnThem = new javax.swing.JButton();
        btnSua = new javax.swing.JButton();
        btnXoa = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblDanhMuc = new javax.swing.JTable();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        txtMoTa = new javax.swing.JTextField();
        txtTenDanhMuc = new javax.swing.JTextField();
        btnCapNhat = new javax.swing.JButton();
        btnTimKiem = new javax.swing.JButton();
        txtTimKiem = new javax.swing.JTextField();

        jPanel1.setBackground(new java.awt.Color(255, 153, 153));

        btnThem.setText("Th√™m");
        btnThem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThemActionPerformed(evt);
            }
        });

        btnSua.setText("S·ª≠a");
        btnSua.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSuaActionPerformed(evt);
            }
        });

        btnXoa.setText("X√≥a");
        btnXoa.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnXoaActionPerformed(evt);
            }
        });

        tblDanhMuc.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null}
            },
            new String [] {
                "Id danh m·ª•c", "T√™n danh m·ª•c", "M√¥ t·∫£"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, true, true
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tblDanhMuc.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblDanhMucMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(tblDanhMuc);

        jLabel2.setText("M√¥ t·∫£");

        jLabel3.setText("T√™n danh m·ª•c");

        jLabel5.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        jLabel5.setText("DANH M·ª§C");

        btnCapNhat.setText("C·∫≠p nh·∫≠t");
        btnCapNhat.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCapNhatActionPerformed(evt);
            }
        });

        btnTimKiem.setText("T√¨m ki·∫øm");
        btnTimKiem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTimKiemActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap(48, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(txtTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, 0)
                        .addComponent(btnTimKiem))
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 607, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGroup(jPanel1Layout.createSequentialGroup()
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addGroup(jPanel1Layout.createSequentialGroup()
                                    .addGap(40, 40, 40)
                                    .addComponent(jLabel3)
                                    .addGap(18, 18, 18)
                                    .addComponent(txtTenDanhMuc, javax.swing.GroupLayout.PREFERRED_SIZE, 182, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGap(39, 39, 39))
                                .addGroup(jPanel1Layout.createSequentialGroup()
                                    .addGap(42, 42, 42)
                                    .addComponent(btnThem)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(btnSua)
                                    .addGap(63, 63, 63)))
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                .addGroup(jPanel1Layout.createSequentialGroup()
                                    .addComponent(btnXoa)
                                    .addGap(63, 63, 63)
                                    .addComponent(btnCapNhat))
                                .addGroup(jPanel1Layout.createSequentialGroup()
                                    .addComponent(jLabel2)
                                    .addGap(24, 24, 24)
                                    .addComponent(txtMoTa, javax.swing.GroupLayout.PREFERRED_SIZE, 171, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel5)
                        .addGap(277, 277, 277)))
                .addContainerGap(19, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel5)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(txtTenDanhMuc, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtMoTa, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2))
                .addGap(37, 37, 37)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnThem)
                    .addComponent(btnSua)
                    .addComponent(btnXoa)
                    .addComponent(btnCapNhat))
                .addGap(30, 30, 30)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnTimKiem)
                    .addComponent(txtTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(0, 0, 0)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 216, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btnThemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThemActionPerformed
        // TODO add your handling code here:
        // Khi ng∆∞·ªùi d√πng nh·∫•n n√∫t "Th√™m"
        if (this.getDanhMuc() != null) {
            // N·∫øu l·∫•y ƒë∆∞·ª£c th√¥ng tin danh m·ª•c t·ª´ form (nghƒ©a l√† ng∆∞·ªùi d√πng ƒë√£ nh·∫≠p ƒë·ªß)

            this.danhMucDAO.insert(this.getDanhMuc());
            // G·ªçi t·ªõi l·ªõp DanhMucDAO ƒë·ªÉ th√™m danh m·ª•c m·ªõi v√†o c∆° s·ªü d·ªØ li·ªáu.
            // H√†m getDanhMuc() l·∫•y t√™n v√† m√¥ t·∫£ danh m·ª•c ng∆∞·ªùi d√πng ƒë√£ nh·∫≠p.

            JOptionPane.showMessageDialog(btnThem, "Th√™m danh m·ª•c th√†nh c√¥ng!");
            // Hi·ªÉn th·ªã th√¥ng b√°o popup cho ng∆∞·ªùi d√πng bi·∫øt l√† th√™m th√†nh c√¥ng.

            fillTable();
            // Sau khi th√™m xong, g·ªçi l·∫°i h√†m fillTable() ƒë·ªÉ t·∫£i l·∫°i b·∫£ng d·ªØ li·ªáu danh m·ª•c.
        }
    }//GEN-LAST:event_btnThemActionPerformed

    private void btnSuaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSuaActionPerformed
        // L·∫•y h√†ng ƒëang ch·ªçn
        int row = tblDanhMuc.getSelectedRow();
        if (row < 0) {
            JOptionPane.showMessageDialog(this, "Vui l√≤ng ch·ªçn m·ªôt danh m·ª•c!");
            return;
        }

// L·∫•y ID danh m·ª•c t·ª´ c·ªôt 0 ho·∫∑c c·ªôt b·∫°n l∆∞u ID
        int idDanhMuc = Integer.parseInt(tblDanhMuc.getValueAt(row, 0).toString());

// L·∫•y t√™n v√† m√¥ t·∫£ m·ªõi t·ª´ √¥ nh·∫≠p li·ªáu
        String tenMoi = txtTenDanhMuc.getText().trim();
        String moTa = txtMoTa.getText().trim();

        if (tenMoi.isEmpty()) {
            JOptionPane.showMessageDialog(this, "Vui l√≤ng nh·∫≠p t√™n danh m·ª•c m·ªõi!");
            return;
        }

// T·∫°o ƒë·ªëi t∆∞·ª£ng DanhMucEntity cho danh m·ª•c c≈© v√† m·ªõi
        DanhMucEntity dmCu = new DanhMucEntity();
        dmCu.setIdDanhMuc(idDanhMuc);  // ‚úÖ d√πng ID thay v√¨ t√™n

        DanhMucEntity dmMoi = new DanhMucEntity();
        dmMoi.setTenDanhMuc(tenMoi);
        dmMoi.setMoTa(moTa);

// G·ªçi DAO
        DanhMucDAO dao = new DanhMucDAO();
        int result = dao.updateDanhMuc_DoiTen(dmCu, dmMoi);

        if (result > 0) {
            JOptionPane.showMessageDialog(this, "ƒê√£ c·∫≠p nh·∫≠t danh m·ª•c th√†nh c√¥ng!");
            fillTable(); // t·∫£i l·∫°i b·∫£ng
        } else {
            JOptionPane.showMessageDialog(this, "Kh√¥ng t√¨m th·∫•y danh m·ª•c v·ªõi ID: " + idDanhMuc);
        }
    }//GEN-LAST:event_btnSuaActionPerformed

    private void btnXoaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnXoaActionPerformed
        // TODO add your handling code here:
        // TODO add your handling code here:                              
        // L·∫•y t√™n danh m·ª•c m√† ng∆∞·ªùi d√πng nh·∫≠p trong √¥ txtTenDanhMuc
        String tenDM = txtTenDanhMuc.getText().trim();
        // ‚Üí .trim() x√≥a kho·∫£ng tr·∫Øng ·ªü ƒë·∫ßu v√† cu·ªëi ƒë·ªÉ tr√°nh l·ªói khi nh·∫≠p d∆∞ d·∫•u c√°ch.

        // N·∫øu ng∆∞·ªùi d√πng ch∆∞a nh·∫≠p g√¨ th√¨ b√°o l·ªói v√† d·ª´ng l·∫°i
        if (tenDM.isEmpty()) {
            JOptionPane.showMessageDialog(this, "Vui l√≤ng nh·∫≠p t√™n danh m·ª•c c·∫ßn x√≥a!");
            return; // D·ª´ng ch∆∞∆°ng tr√¨nh, kh√¥ng x√≥a
        }

        // H·ªôp tho·∫°i x√°c nh·∫≠n: h·ªèi ng∆∞·ªùi d√πng c√≥ ch·∫Øc mu·ªën x√≥a hay kh√¥ng
        if (JOptionPane.showConfirmDialog(this,
                "B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a danh m·ª•c: " + tenDM + " ?", // n·ªôi dung th√¥ng b√°o
                "X√°c nh·∫≠n", // ti√™u ƒë·ªÅ h·ªôp tho·∫°i
                JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) { // n·∫øu ng∆∞·ªùi d√πng ch·ªçn YES

            try {
                // T·∫°o ƒë·ªëi t∆∞·ª£ng DAO ƒë·ªÉ l√†m vi·ªác v·ªõi c∆° s·ªü d·ªØ li·ªáu
                DanhMucDAO dao = new DanhMucDAO();

                // G·ªçi h√†m x√≥a danh m·ª•c theo t√™n
                dao.deleteByTenDanhMuc(tenDM);

                // C·∫≠p nh·∫≠t l·∫°i b·∫£ng hi·ªÉn th·ªã danh m·ª•c sau khi x√≥a
                fillTable();

                // X√≥a tr·∫Øng c√°c √¥ nh·∫≠p li·ªáu
                clearForm();

                // Th√¥ng b√°o th√†nh c√¥ng
                JOptionPane.showMessageDialog(this, "X√≥a danh m·ª•c th√†nh c√¥ng!");

            } catch (Exception e) {
                // N·∫øu c√≥ l·ªói (v√≠ d·ª•: kh√¥ng k·∫øt n·ªëi ƒë∆∞·ª£c DB), b√°o l·ªói ra
                JOptionPane.showMessageDialog(this, "L·ªói khi x√≥a danh m·ª•c: " + e.getMessage());
            }
        }
    }//GEN-LAST:event_btnXoaActionPerformed

    private void btnCapNhatActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCapNhatActionPerformed
        // TODO add your handling code here:
        // X√≥a n·ªôi dung trong √¥ nh·∫≠p "T√™n danh m·ª•c"
        txtTenDanhMuc.setText("");

        // X√≥a n·ªôi dung trong √¥ nh·∫≠p "M√¥ t·∫£"
        txtMoTa.setText("");

        // X√≥a n·ªôi dung trong √¥ t√¨m ki·∫øm (n·∫øu c√≥)
        txtTimKiem.setText("");

        // B·ªè ch·ªçn b·∫•t k·ª≥ h√†ng n√†o ƒëang ƒë∆∞·ª£c ch·ªçn trong b·∫£ng
        tblDanhMuc.clearSelection();

        // G·ªçi l·∫°i h√†m fillTable() ƒë·ªÉ t·∫£i l·∫°i to√†n b·ªô d·ªØ li·ªáu danh m·ª•c t·ª´ CSDL
        fillTable();
    }//GEN-LAST:event_btnCapNhatActionPerformed

    private void tblDanhMucMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblDanhMucMouseClicked
        // TODO add your handling code here:
        // TODO add your handling code here:
        // L·∫•y ch·ªâ s·ªë c·ªßa h√†ng (row) m√† ng∆∞·ªùi d√πng ƒëang ch·ªçn trong b·∫£ng
        int row = tblDanhMuc.getSelectedRow();

        // N·∫øu ng∆∞·ªùi d√πng ch∆∞a ch·ªçn h√†ng n√†o (row = -1) th√¨ tho√°t ra lu√¥n, kh√¥ng l√†m g√¨
        if (row < 0) {
            return;
        }

        // N·∫øu c√≥ ch·ªçn r·ªìi th√¨ th·ª±c hi·ªán l·∫•y d·ªØ li·ªáu t·ª´ b·∫£ng hi·ªÉn th·ªã l√™n form
        // L·∫•y gi√° tr·ªã ·ªü c·ªôt 0 (t·ª©c l√† c·ªôt ‚ÄúT√™n danh m·ª•c‚Äù) c·ªßa h√†ng ƒëang ch·ªçn
        // Sau ƒë√≥ g√°n v√†o √¥ nh·∫≠p txtTenDanhMuc
        txtTenDanhMuc.setText(tblDanhMuc.getValueAt(row, 1).toString());

        // L·∫•y gi√° tr·ªã ·ªü c·ªôt 1 (t·ª©c l√† c·ªôt ‚ÄúM√¥ t·∫£‚Äù) c·ªßa h√†ng ƒëang ch·ªçn
        // Sau ƒë√≥ g√°n v√†o √¥ nh·∫≠p txtMoTa
        txtMoTa.setText(tblDanhMuc.getValueAt(row, 2).toString());
    }//GEN-LAST:event_tblDanhMucMouseClicked

    private void btnTimKiemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTimKiemActionPerformed
        // TODO add your handling code here:
        String keyword = txtTimKiem.getText().trim(); // L·∫•y n·ªôi dung trong √¥ t√¨m ki·∫øm

        // N·∫øu kh√¥ng nh·∫≠p g√¨ -> th√¥ng b√°o + load l·∫°i b·∫£ng
        if (keyword.isEmpty()) {
            JOptionPane.showMessageDialog(this, "Vui l√≤ng nh·∫≠p ID ƒë·ªÉ t√¨m ki·∫øm!");
            fillTable(); // G·ªçi l·∫°i h√†m load to√†n b·ªô danh m·ª•c
            return;
        }

        // Ki·ªÉm tra xem c√≥ ph·∫£i s·ªë hay kh√¥ng
        int id;
        try {
            id = Integer.parseInt(keyword);
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "ID ph·∫£i l√† s·ªë nguy√™n! B·∫£ng s·∫Ω gi·ªØ nguy√™n.");
            return;
        }

        // G·ªçi DAO ƒë·ªÉ t√¨m ki·∫øm theo ID
        DanhMucDAO dao = new DanhMucDAO();
        List<DanhMucEntity> list = dao.search(String.valueOf(id)); // ‚úÖ G·ªçi h√†m t√¨m theo ID

        // N·∫øu kh√¥ng t√¨m th·∫•y -> th√¥ng b√°o + gi·ªØ nguy√™n b·∫£ng
        if (list == null || list.isEmpty()) {
            JOptionPane.showMessageDialog(this, "Kh√¥ng t√¨m th·∫•y danh m·ª•c c√≥ ID = " + id);
            return;
        }

        // N·∫øu t√¨m th·∫•y -> hi·ªÉn th·ªã k·∫øt qu·∫£ t√¨m ƒë∆∞·ª£c
        DefaultTableModel model = (DefaultTableModel) tblDanhMuc.getModel();
        model.setRowCount(0); // X√≥a d·ªØ li·ªáu c≈© trong b·∫£ng

        for (DanhMucEntity dm : list) {
            Object[] row = {
                dm.getIdDanhMuc(),
                dm.getTenDanhMuc(),
                dm.getMoTa()
            };
            model.addRow(row);
        }
    }//GEN-LAST:event_btnTimKiemActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnCapNhat;
    private javax.swing.JButton btnSua;
    private javax.swing.JButton btnThem;
    private javax.swing.JButton btnTimKiem;
    private javax.swing.JButton btnXoa;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable tblDanhMuc;
    private javax.swing.JTextField txtMoTa;
    private javax.swing.JTextField txtTenDanhMuc;
    private javax.swing.JTextField txtTimKiem;
    // End of variables declaration//GEN-END:variables
}
